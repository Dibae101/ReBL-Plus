Title: Bug in app calendar which leads app to crash

App: Memento Calendar
Package Name: com.alexstyl.specialdates
Issue: https://github.com/alexstyl/Memento-Calendar/issues/169

Description:
Memento Calendar crashes when a user sets an invalid date (such as February 30th or March 31st in February) as a contact's birthday using the date picker. The crash occurs because the date picker allows selection of invalid dates that don't exist in the calendar (like February 30th in a non-leap year). When the app attempts to process this impossible date, it crashes because the date validation logic fails to handle these edge cases. The date picker should dynamically adjust the maximum allowed day based on the selected month and year.

Root Cause:
The date picker (EventDatePicker) does not properly validate or constrain the maximum day value based on the selected month and year. Users can scroll through days without the picker updating to reflect valid days for the current month. For example:
- User scrolls to March (31 days) and selects day 31
- User then changes month to February (28/29 days) without the day resetting
- Day picker still shows "31" even though February only has 28/29 days
- When user confirms this invalid date (Feb 30, Feb 31, etc.), the app crashes

The picker needs dynamic validation:
- February: 28 days (or 29 in leap years)
- April, June, September, November: 30 days
- January, March, May, July, August, October, December: 31 days

Steps to Reproduce:

Method 1 (Direct selection):
1. Launch Memento Calendar app v11.2
2. Create a new contact by clicking the '+' button
3. Click on the birthday field
4. In the date picker, select February as the month
5. Scroll the day picker to "30" (which doesn't exist in February)
6. Click "Set" to confirm the date
7. Observe the app crashes immediately

Method 2 (Month switching - as described by invokergakki):
1. Create a new contact by clicking '+'
2. Click the birthday field and disable 'include year'
3. Slide the month to March (31 days)
4. Slide the day selector to 31
5. Don't click set yet - slide the month back to February
6. Now click "Set" to confirm
7. Observe the app crashes (trying to set Feb 31)

Expected Behavior:
When using the date picker:
1. The maximum day value should automatically adjust based on the selected month
2. If month changes from one with more days to fewer days, the day should auto-adjust
3. Example: If day is set to 31 and user changes month to February, day should reset to 28 (or 29 for leap years)
4. Only valid dates should be selectable in the picker
5. The app should never crash due to invalid date selection

Actual Behavior:
- The date picker allows selection of invalid dates (Feb 30, Feb 31, April 31, etc.)
- When an invalid date is set as a birthday, the app crashes immediately
- The day picker does not dynamically update its maximum value when the month changes
- 2018 is not a leap year, so February should only show 28 days, but the picker shows 30+

Crash Details:
- Exception Type: Likely IllegalArgumentException or DateTimeException
- Symptom: Immediate crash when confirming invalid date
- Affected Version: v11.2
- Device: Samsung J7 Prime
- Android Version: Android 7.0 Nougat
- Frequency: 100% when setting invalid dates like Feb 30

Video Demonstration:
https://youtu.be/BN-NH2l4sAg (full reproduction steps shown)

Screenshot:
Shows date picker displaying "30 Feb 2018" which is an invalid date (February only has 28 days in 2018).

Technical Analysis:
The issue is in the EventDatePicker implementation. The picker needs to:

1. **Calculate maximum days dynamically using JodaTime**:
```java
// Correct approach:
int maxDaysInMonth = getMaxDaysForMonthYear(month, year);
dayPicker.setMaxValue(maxDaysInMonth);

private int getMaxDaysForMonthYear(int month, int year) {
    if (year > 0) {
        // Year is specified - use actual leap year logic
        return new LocalDate(year, month, 1).dayOfMonth().getMaximumValue();
    } else {
        // Year not specified - handle February specially
        if (month == 2) {
            return 29; // Allow 29 for February when year unknown
        }
        return new LocalDate(2000, month, 1).dayOfMonth().getMaximumValue();
    }
}
```

2. **Add listener for month/year changes**:
```java
monthPicker.setOnValueChangedListener(new OnValueChangeListener() {
    @Override
    public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
        updateMaxDayForMonth(newVal, currentYear);
        // If current day exceeds new max, adjust it
        if (dayPicker.getValue() > maxDaysInMonth) {
            dayPicker.setValue(maxDaysInMonth);
        }
    }
});
```

3. **Handle edge case for February without year**:
When "include year" is disabled, the app allows 29 days for February to accommodate leap years, but should still prevent Feb 30 or 31.

Common Date Constraints:
- February: 28 days (29 in leap years)
- April, June, September, November: 30 days
- All other months: 31 days

Leap year calculation:
- Divisible by 4 = leap year
- Except if divisible by 100 = not a leap year
- Except if divisible by 400 = leap year
- 2018 is NOT a leap year (not divisible by 4)

Impact:
- Severity: High - Complete crash when setting birthdays
- Frequency: Occurs whenever invalid date is selected (relatively easy to trigger)
- Affected Component: Contact creation, birthday date picker
- User Impact: Users cannot set birthdays for contacts if they accidentally select invalid dates
- Data Integrity: Invalid dates can't be saved, but crash prevents error message from showing

Use Case Context:
Memento Calendar is a contacts birthday reminder app. The ability to set birthdays is core functionality. This bug directly affects the primary user workflow and makes the app appear buggy and unreliable.

Resolution:
Fixed by madlymad in PR #180: "Use max day in picker depending on month, year"
Closed by alexstyl on April 30, 2018.

The fix implemented:
1. Used JodaTime to calculate accepted day values based on month/year
2. Override Joda logic when year is not present for February to maintain existing functionality (allow up to 29 days)
3. Dynamically update day picker maximum based on month selection

Commits:
- a828709: "Use max day in picker depending on month, year"
- 2df64ab: "Resolve issue #169"
- 9700123: Final implementation

Released in Version 12.1 (mentioned in PR #194).

Note: This repository was archived on January 11, 2021, and is now read-only. Memento Calendar was an Android app for remembering birthdays and special dates.
