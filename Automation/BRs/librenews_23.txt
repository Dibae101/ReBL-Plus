App Name: LibreNews

Bug Report Title:
App crashes when toggling auto-refresh after browser navigation

Bug Report Issue:
LibreNews crashes with NullPointerException when user toggles "Automatically refresh" setting after navigating to external browser and returning to the app.

### DESCRIPTION
The preference change listener tries to access a null view's context after the user has navigated away and returned, causing a crash.

### STEPS TO REPRODUCE
1. Launch LibreNews app
2. Navigate to Settings and enable "Automatically refresh"
3. Click "INFO" button
4. Click "GO TO LIBRENEWS" button (opens external browser)
5. Press BACK button to return to the app
6. In Settings, disable "Automatically refresh"
7. App crashes with NullPointerException

### EXPECTED BEHAVIOR
The preference change should work smoothly even after navigating away and returning to the app.

### ACTUAL BEHAVIOR
App crashes with NullPointerException: Attempt to invoke virtual method 'android.content.Context android.view.View.getContext()' on a null object reference.

### ENVIRONMENT
LibreNews version: v1.4
Android version: 6.0, 6.0.1
Device: Android Studio Emulator, Nexus 5

Crash Details:
- Exception Type: java.lang.NullPointerException
- Error Message: Attempt to invoke virtual method 'android.content.Context android.view.View.getContext()' on a null object reference
- Location: app.librenews.io.librenews.views.SettingsActivityFragment.onSharedPreferenceChanged(SettingsActivityFragment.java:26)
- Device: Reproduced on Android Studio Emulator (x86, Android 6.0) and Nexus 5 Phone (Android 6.0.1)

Stack Trace:
```
java.lang.NullPointerException: Attempt to invoke virtual method 'android.content.Context android.view.View.getContext()' on a null object reference
    at app.librenews.io.librenews.views.SettingsActivityFragment.onSharedPreferenceChanged(SettingsActivityFragment.java:26)
    at android.app.SharedPreferencesImpl$EditorImpl.notifyListeners(SharedPreferencesImpl.java:479)
    at android.app.SharedPreferencesImpl$EditorImpl.apply(SharedPreferencesImpl.java:387)
    at android.preference.Preference.tryCommit(Preference.java:1415)
    at android.preference.Preference.persistBoolean(Preference.java:1681)
    at android.preference.TwoStatePreference.setChecked(TwoStatePreference.java:81)
    at android.preference.TwoStatePreference.onClick(TwoStatePreference.java:66)
    at android.preference.Preference.performClick(Preference.java:994)
    at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:214)
    at android.widget.AdapterView.performItemClick(AdapterView.java:310)
    at android.widget.AbsListView.performItemClick(AbsListView.java:1145)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:3042)
    at android.widget.AbsListView$3.run(AbsListView.java:3879)
    at android.os.Handler.handleCallback(Handler.java:739)
    at android.os.Handler.dispatchMessage(Handler.java:95)
    at android.os.Looper.loop(Looper.java:148)
    at android.app.ActivityThread.main(ActivityThread.java:5417)
    at java.lang.reflect.Method.invoke(Native Method)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
```

Technical Analysis:
The issue is a classic Android fragment lifecycle problem. The call chain is:
1. User toggles preference (TwoStatePreference.onClick)
2. Preference persists boolean value (persistBoolean)
3. SharedPreferences notifies listeners (notifyListeners)
4. SettingsActivityFragment.onSharedPreferenceChanged is called
5. Code attempts to call getView().getContext() but getView() returns null

The fragment's view was destroyed when the user navigated to the browser, but the preference listener wasn't unregistered. When the user returns and changes a preference, the listener fires but the view is no longer available.

Proposed Solutions:
1. Add null check before accessing view:
   ```java
   @Override
   public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
       View view = getView();
       if (view != null) {
           Context context = view.getContext();
           // ... rest of logic
       }
   }
   ```

2. Use getActivity() instead of getView().getContext():
   ```java
   Context context = getActivity();
   if (context != null) {
       // ... use context
   }
   ```

3. Properly manage listener lifecycle by unregistering in onPause/onStop and re-registering in onResume.

Impact:
- Severity: High - Complete app crash
- Frequency: 100% when following the specific navigation pattern
- Affected Component: SettingsActivityFragment, preference change handling
- User Impact: Users cannot change settings after navigating to external links and returning to the app

Note: This repository was archived on December 24, 2021, and is now read-only. The issue remains open and unfixed.
