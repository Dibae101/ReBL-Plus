App Name: AnkiDroid

Bug Report Title:
App crashes when adding picture from camera on Android 7+

Bug Report Issue:
AnkiDroid crashes immediately when user tries to add an image to a flashcard using the device camera on Android 7.0 and above. The crash occurs with FileUriExposedException before the camera app even opens.

### DESCRIPTION
When trying to attach a photo to a flashcard by taking a picture with the camera, the app crashes on Android 7+ devices due to stricter file URI sharing policies.

### STEPS TO REPRODUCE
1. Open AnkiDroid app
2. Navigate to any deck
3. Tap the "+" button to add a new card
4. In the card editor, tap the "Attach" or paperclip button
5. Select "Add image" from the menu
6. Choose "Camera" as the image source
7. App crashes immediately with FileUriExposedException

### EXPECTED BEHAVIOR
The camera app should open, allowing the user to take a photo that will be attached to the flashcard.

### ACTUAL BEHAVIOR
App crashes immediately with "Unfortunately, AnkiDroid has stopped" error before the camera opens. User cannot add images from camera on Android 7+.

### ENVIRONMENT
AnkiDroid version: 2.8.2, 2.9alpha4
Android version: 7.0+ (Nougat and above)
Device: Various devices

### LOGCAT
FileUriExposedException: file:/// exposed beyond app through ClipData.Item.getUri()

Crash Details:
- Exception Type: android.os.FileUriExposedException
- Error Message: file:///storage/emulated/0/Pictures/img_201702162214361518016482.jpg exposed beyond app through ClipData.Item.getUri()
- Location: Exposed through Intent/ClipData when launching camera
- Affected Versions: 2.8.2, 2.9alpha4
- Affected Android Versions: Android 7.0 (Nougat) and above
- Working Android Versions: Android 6.0 (Marshmallow) and below

Stack Trace:
```
android.os.FileUriExposedException: file:///storage/emulated/0/Pictures/img_201702162214361518016482.jpg exposed beyond app through ClipData.Item.getUri()
    [Full stack trace not provided in issue]
```

Debug Information (from user report):
- AnkiDroid Version: 2.9alpha4
- Android Version: 7.0
- ACRA UUID: 7b59c410-9be8-4f99-8be1-0b634cca407f

Technical Analysis:
Android 7.0 introduced FileUriExposedException as part of enhanced security measures. The breaking change requires:

1. **Add FileProvider to AndroidManifest.xml**:
```xml
<provider
    android:name="androidx.core.content.FileProvider"
    android:authorities="com.ichi2.anki.fileprovider"
    android:exported="false"
    android:grantUriPermissions="true">
    <meta-data
        android:name="android.support.FILE_PROVIDER_PATHS"
        android:resource="@xml/fileprovider" />
</provider>
```

2. **Define file paths in xml/fileprovider.xml**:
```xml
<paths>
    <external-path name="pictures" path="Pictures/" />
</paths>
```

3. **Update code to use FileProvider**:
```java
File photoFile = new File(picturesDir, "img_" + timestamp + ".jpg");
Uri photoUri;

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
    photoUri = FileProvider.getUriForFile(context,
        "com.ichi2.anki.fileprovider",
        photoFile);
} else {
    photoUri = Uri.fromFile(photoFile);
}

Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoUri);
cameraIntent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
startActivityForResult(cameraIntent, REQUEST_CAMERA);
```

Similar Issue:
The issue reporter (timrae) noted this is similar to a previously fixed crash when emailing APKGs, which also involved file URI exposure issues. This suggests a pattern of file:// URI usage that needs updating throughout the codebase.

Impact:
- Severity: High - Core feature completely broken on Android 7+
- Frequency: 100% on Android 7.0 and above when using camera to add images
- Affected Component: Image attachment, camera integration, card editor
- User Impact: Users cannot add images from camera to flashcards on modern Android versions
- Market Share: As of 2017, Android 7+ adoption was growing rapidly, affecting increasing number of users

Resolution:
Fixed by jkennethcarino in PR #4678: "Fix crash on add picture from camera on Android 7"
Closed by timrae on August 6, 2017, after merge.

The fix implements FileProvider usage to properly handle file URIs on Android 7+.

Android 7.0 Breaking Changes:
This issue is part of a broader category of Android 7.0 compatibility issues. Other apps experienced similar crashes due to:
- Passing file:// URIs through Intents
- Sharing files with other apps
- Taking photos with camera
- Attaching files to emails

All require migration to FileProvider and content:// URIs.

Note: AnkiDroid is a free, open-source flashcard app for Android, based on the spaced repetition system. It's widely used for language learning and memorization.
